{"ast":null,"code":"import _classCallCheck from \"/Users/IDogueto/Desktop/Repositories/emdashboarddeployed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/IDogueto/Desktop/Repositories/emdashboarddeployed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/IDogueto/Desktop/Repositories/emdashboarddeployed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/IDogueto/Desktop/Repositories/emdashboarddeployed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/IDogueto/Desktop/Repositories/emdashboarddeployed/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/IDogueto/Desktop/Repositories/emdashboarddeployed/src/dashboard/list.js\";\nimport React from 'react';\nimport ReactTable from \"react-table\";\nimport { getTableData, deleteTableData } from '../utils/requests';\nimport { getLinkOptions, convertInfo } from '../utils/masks';\nimport { withRouter } from 'react-router';\nimport PopupButton from './popup';\n\nvar List =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(List, _React$Component);\n\n  function List(props) {\n    var _this;\n\n    _classCallCheck(this, List);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(List).call(this, props));\n    _this.state = {\n      data: [],\n      shownData: [],\n      links: []\n    };\n    return _this;\n  }\n\n  _createClass(List, [{\n    key: \"deleteRow\",\n    value: function deleteRow(value) {\n      var data = {};\n      var body = {};\n      data['object'] = this.props.object;\n      data['attribute'] = '_id';\n      data['value'] = value;\n      body['data'] = data;\n      deleteTableData(body).then(function (res) {\n        window.location.reload();\n      }).catch(function (err) {\n        console.error(err);\n      });\n    }\n  }, {\n    key: \"getData\",\n    value: function getData() {\n      var _this2 = this;\n\n      console.log(\"Getting data..\");\n      var data = [];\n      return getTableData(this.props.object, this.props.fixed).then(function (res) {\n        data = res.data.result;\n\n        _this2.setState({\n          data: data\n        });\n      });\n    }\n  }, {\n    key: \"getOptions\",\n    value: function getOptions(object, rows) {\n      var link = {\n        object: object,\n        attribute: '_id',\n        shown: ['lastName', 'firstName'],\n        rows: rows\n      };\n      var newState = this.state;\n      newState.links.push(link);\n      this.setState(newState);\n      return convertInfo(link);\n    }\n  }, {\n    key: \"makeShownData\",\n    value: function makeShownData(pairs) {\n      var data = JSON.parse(JSON.stringify(this.state.data));\n      var shownData = JSON.parse(JSON.stringify(data));\n      var links = JSON.parse(JSON.stringify(this.state.links));\n      var _iteratorNormalCompletion = true;\n      var _didIteratorError = false;\n      var _iteratorError = undefined;\n\n      try {\n        for (var _iterator = links[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n          var link = _step.value;\n          var object = link.object;\n          var _iteratorNormalCompletion2 = true;\n          var _didIteratorError2 = false;\n          var _iteratorError2 = undefined;\n\n          try {\n            for (var _iterator2 = data[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n              var datum = _step2.value;\n              datum[object] = pairs[datum[object]];\n            }\n          } catch (err) {\n            _didIteratorError2 = true;\n            _iteratorError2 = err;\n          } finally {\n            try {\n              if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n                _iterator2.return();\n              }\n            } finally {\n              if (_didIteratorError2) {\n                throw _iteratorError2;\n              }\n            }\n          }\n        }\n      } catch (err) {\n        _didIteratorError = true;\n        _iteratorError = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion && _iterator.return != null) {\n            _iterator.return();\n          }\n        } finally {\n          if (_didIteratorError) {\n            throw _iteratorError;\n          }\n        }\n      }\n\n      this.setState({\n        shownData: data\n      });\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this3 = this;\n\n      this.getData().then(function () {\n        var rows = _this3.state.data.map(function (row) {\n          return row[_this3.props.link];\n        });\n\n        return _this3.getOptions(_this3.props.link, rows);\n      }).then(function (pairs) {\n        _this3.makeShownData(pairs);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var object = this.props.object;\n      var columns = this.props.columns.concat([{\n        Header: 'Action',\n        Cell: function Cell(props) {\n          return React.createElement(\"div\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 91\n            },\n            __self: this\n          }, React.createElement(\"button\", {\n            className: \"btn btn-danger\",\n            onClick: function onClick() {\n              _this4.deleteRow(props.original._id);\n            },\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 92\n            },\n            __self: this\n          }, \"Delete\"));\n        },\n        show: this.state.show,\n        filterable: false,\n        width: 100\n      }]);\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106\n        },\n        __self: this\n      }, React.createElement(PopupButton, {\n        name: this.props.title,\n        object: this.props.object,\n        columns: columns,\n        fixed: this.props.fixed,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }), React.createElement(ReactTable, {\n        data: this.state.shownData,\n        columns: columns,\n        filterable: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return List;\n}(React.Component);\n\nexport default withRouter(List);","map":{"version":3,"sources":["/Users/IDogueto/Desktop/Repositories/emdashboarddeployed/src/dashboard/list.js"],"names":["React","ReactTable","getTableData","deleteTableData","getLinkOptions","convertInfo","withRouter","PopupButton","List","props","state","data","shownData","links","value","body","object","then","res","window","location","reload","catch","err","console","error","log","fixed","result","setState","rows","link","attribute","shown","newState","push","pairs","JSON","parse","stringify","datum","getData","map","row","getOptions","makeShownData","columns","concat","Header","Cell","deleteRow","original","_id","show","filterable","width","title","Component"],"mappings":";;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,aAAvB;AACA,SAAQC,YAAR,EAAsBC,eAAtB,QAA4C,mBAA5C;AACA,SAAQC,cAAR,EAAwBC,WAAxB,QAA0C,gBAA1C;AACA,SAAQC,UAAR,QAAyB,cAAzB;AACA,OAAOC,WAAP,MAAyB,SAAzB;;IAEMC,I;;;;;AACJ,gBAAYC,KAAZ,EAAkB;AAAA;;AAAA;;AAChB,8EAAMA,KAAN;AACA,UAAKC,KAAL,GAAa;AACXC,MAAAA,IAAI,EAAE,EADK;AAEXC,MAAAA,SAAS,EAAE,EAFA;AAGXC,MAAAA,KAAK,EAAE;AAHI,KAAb;AAFgB;AAOjB;;;;8BAESC,K,EAAM;AACd,UAAIH,IAAI,GAAG,EAAX;AACA,UAAII,IAAI,GAAG,EAAX;AACAJ,MAAAA,IAAI,CAAC,QAAD,CAAJ,GAAiB,KAAKF,KAAL,CAAWO,MAA5B;AACAL,MAAAA,IAAI,CAAC,WAAD,CAAJ,GAAoB,KAApB;AACAA,MAAAA,IAAI,CAAC,OAAD,CAAJ,GAAgBG,KAAhB;AACAC,MAAAA,IAAI,CAAC,MAAD,CAAJ,GAAeJ,IAAf;AACAR,MAAAA,eAAe,CAACY,IAAD,CAAf,CACCE,IADD,CACM,UAACC,GAAD,EAAS;AACbC,QAAAA,MAAM,CAACC,QAAP,CAAgBC,MAAhB;AACD,OAHD,EAGGC,KAHH,CAGS,UAACC,GAAD,EAAS;AAChBC,QAAAA,OAAO,CAACC,KAAR,CAAcF,GAAd;AACD,OALD;AAMD;;;8BAES;AAAA;;AACRC,MAAAA,OAAO,CAACE,GAAR,CAAY,gBAAZ;AACA,UAAIf,IAAI,GAAG,EAAX;AACA,aAAOT,YAAY,CAAC,KAAKO,KAAL,CAAWO,MAAZ,EAAmB,KAAKP,KAAL,CAAWkB,KAA9B,CAAZ,CACNV,IADM,CACD,UAACC,GAAD,EAAS;AACZP,QAAAA,IAAI,GAAGO,GAAG,CAACP,IAAJ,CAASiB,MAAhB;;AACA,QAAA,MAAI,CAACC,QAAL,CAAc;AACZlB,UAAAA,IAAI,EAAEA;AADM,SAAd;AAGD,OANK,CAAP;AAOD;;;+BAEUK,M,EAAOc,I,EAAK;AACrB,UAAIC,IAAI,GAAG;AACTf,QAAAA,MAAM,EAAEA,MADC;AAETgB,QAAAA,SAAS,EAAE,KAFF;AAGTC,QAAAA,KAAK,EAAE,CAAC,UAAD,EAAY,WAAZ,CAHE;AAITH,QAAAA,IAAI,EAAEA;AAJG,OAAX;AAMA,UAAII,QAAQ,GAAG,KAAKxB,KAApB;AACAwB,MAAAA,QAAQ,CAACrB,KAAT,CAAesB,IAAf,CAAoBJ,IAApB;AACA,WAAKF,QAAL,CAAcK,QAAd;AACA,aAAO7B,WAAW,CAAC0B,IAAD,CAAlB;AACD;;;kCAEaK,K,EAAM;AAClB,UAAIzB,IAAI,GAAI0B,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAe,KAAK7B,KAAL,CAAWC,IAA1B,CAAX,CAAZ;AACA,UAAIC,SAAS,GAAGyB,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAe5B,IAAf,CAAX,CAAhB;AACA,UAAIE,KAAK,GAAGwB,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,SAAL,CAAe,KAAK7B,KAAL,CAAWG,KAA1B,CAAX,CAAZ;AAHkB;AAAA;AAAA;;AAAA;AAIlB,6BAAiBA,KAAjB,8HAAuB;AAAA,cAAdkB,IAAc;AACrB,cAAIf,MAAM,GAAGe,IAAI,CAACf,MAAlB;AADqB;AAAA;AAAA;;AAAA;AAErB,kCAAkBL,IAAlB,mIAAuB;AAAA,kBAAd6B,KAAc;AACrBA,cAAAA,KAAK,CAACxB,MAAD,CAAL,GAAgBoB,KAAK,CAACI,KAAK,CAACxB,MAAD,CAAN,CAArB;AACD;AAJoB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKtB;AATiB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAUlB,WAAKa,QAAL,CAAc;AAACjB,QAAAA,SAAS,EAAED;AAAZ,OAAd;AACD;;;wCAEkB;AAAA;;AAEjB,WAAK8B,OAAL,GACCxB,IADD,CACM,YAAM;AACV,YAAIa,IAAI,GAAG,MAAI,CAACpB,KAAL,CAAWC,IAAX,CAAgB+B,GAAhB,CAAoB,UAAAC,GAAG;AAAA,iBAAIA,GAAG,CAAC,MAAI,CAAClC,KAAL,CAAWsB,IAAZ,CAAP;AAAA,SAAvB,CAAX;;AACA,eAAO,MAAI,CAACa,UAAL,CAAgB,MAAI,CAACnC,KAAL,CAAWsB,IAA3B,EAAgCD,IAAhC,CAAP;AACD,OAJD,EAKCb,IALD,CAKM,UAACmB,KAAD,EAAW;AACf,QAAA,MAAI,CAACS,aAAL,CAAmBT,KAAnB;AACD,OAPD;AAQD;;;6BAIO;AAAA;;AACN,UAAIpB,MAAM,GAAG,KAAKP,KAAL,CAAWO,MAAxB;AACA,UAAI8B,OAAO,GAAG,KAAKrC,KAAL,CAAWqC,OAAX,CAAmBC,MAAnB,CAA0B,CAAC;AACvCC,QAAAA,MAAM,EAAE,QAD+B;AAEvCC,QAAAA,IAAI,EAAE,cAAAxC,KAAK,EAAI;AACb,iBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACE;AACA,YAAA,SAAS,EAAG,gBADZ;AAEA,YAAA,OAAO,EAAI,mBAAM;AACf,cAAA,MAAI,CAACyC,SAAL,CAAezC,KAAK,CAAC0C,QAAN,CAAeC,GAA9B;AACD,aAJD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBADF,CADF;AAUD,SAbsC;AAcvCC,QAAAA,IAAI,EAAE,KAAK3C,KAAL,CAAW2C,IAdsB;AAevCC,QAAAA,UAAU,EAAE,KAf2B;AAgBvCC,QAAAA,KAAK,EAAE;AAhBgC,OAAD,CAA1B,CAAd;AAkBA,aACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,oBAAC,WAAD;AACE,QAAA,IAAI,EAAI,KAAK9C,KAAL,CAAW+C,KADrB;AAEE,QAAA,MAAM,EAAI,KAAK/C,KAAL,CAAWO,MAFvB;AAGE,QAAA,OAAO,EAAI8B,OAHb;AAIE,QAAA,KAAK,EAAI,KAAKrC,KAAL,CAAWkB,KAJtB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADF,EAOE,oBAAC,UAAD;AACE,QAAA,IAAI,EAAI,KAAKjB,KAAL,CAAWE,SADrB;AAEE,QAAA,OAAO,EAAIkC,OAFb;AAGE,QAAA,UAAU,EAAI,IAHhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAPF,CADF;AAeD;;;;EAhHgB9C,KAAK,CAACyD,S;;AAmHzB,eAAenD,UAAU,CAACE,IAAD,CAAzB","sourcesContent":["import React from 'react';\nimport ReactTable from \"react-table\";\nimport {getTableData, deleteTableData} from '../utils/requests';\nimport {getLinkOptions, convertInfo} from '../utils/masks';\nimport {withRouter} from 'react-router'\nimport PopupButton  from './popup'\n\nclass List extends React.Component {\n  constructor(props){\n    super(props)\n    this.state = {\n      data: [],\n      shownData: [],\n      links: []\n    }\n  }\n\n  deleteRow(value){\n    var data = {};\n    var body = {};\n    data['object'] = this.props.object;\n    data['attribute'] = '_id';\n    data['value'] = value;\n    body['data'] = data;\n    deleteTableData(body)\n    .then((res) => {\n      window.location.reload();\n    }).catch((err) => {\n      console.error(err)\n    });\n  }\n\n  getData() {\n    console.log(\"Getting data..\");\n    var data = [];\n    return getTableData(this.props.object,this.props.fixed)\n    .then((res) => {\n       data = res.data.result;\n       this.setState({\n         data: data\n       })\n     });\n  }\n\n  getOptions(object,rows){\n    let link = {\n      object: object,\n      attribute: '_id',\n      shown: ['lastName','firstName'],\n      rows: rows\n    }\n    let newState = this.state;\n    newState.links.push(link);\n    this.setState(newState);\n    return convertInfo(link);\n  }\n\n  makeShownData(pairs){\n    let data  = JSON.parse(JSON.stringify(this.state.data));\n    let shownData = JSON.parse(JSON.stringify(data));\n    let links = JSON.parse(JSON.stringify(this.state.links));\n    for (let link of links){\n      let object = link.object;\n      for (let datum of data){\n        datum[object] = pairs[datum[object]]\n      }\n    }\n    this.setState({shownData: data})\n  }\n\n  componentDidMount(){\n\n    this.getData()\n    .then(() => {\n      let rows = this.state.data.map(row => row[this.props.link]);\n      return this.getOptions(this.props.link,rows);\n    })\n    .then((pairs) => {\n      this.makeShownData(pairs);\n    })\n  }\n\n\n\n  render(){\n    let object = this.props.object;\n    let columns = this.props.columns.concat([{\n      Header: 'Action',\n      Cell: props => {\n        return(\n          <div>\n            <button\n            className = 'btn btn-danger'\n            onClick = {() => {\n              this.deleteRow(props.original._id)\n            }}>\n            Delete</button>\n          </div>\n        )\n      },\n      show: this.state.show,\n      filterable: false,\n      width: 100\n    }]);\n    return(\n      <div>\n        <PopupButton\n          name = {this.props.title}\n          object = {this.props.object}\n          columns = {columns}\n          fixed = {this.props.fixed}\n          />\n        <ReactTable\n          data = {this.state.shownData}\n          columns = {columns}\n          filterable = {true}\n         />\n       </div>\n    )\n  }\n}\n\nexport default withRouter(List);\n"]},"metadata":{},"sourceType":"module"}